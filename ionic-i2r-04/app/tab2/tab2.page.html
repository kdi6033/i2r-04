

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Tab 2</ion-title>
    </ion-toolbar>
  </ion-header>
<!-- BLE and WiFi Toggle -->
<div class="slider-box">
  <div class="slider-section">
    <div class="flex justify-between mt-2">
      <span [class]="bleLabelClass">BLE</span>
      <div id="ble-wifi-slider" class="slider" [class.on]="globalService.dev.isSliderOn" (click)="toggleSlider()">
        <div class="slider-circle" [class.on]="globalService.dev.isSliderOn"></div>
      </div>
      <span [class]="wifiLabelClass">WiFi</span>
    </div>
  </div>
</div> <br>

  <!-- <ion-item>
    <ion-label>블루투스</ion-label>
    <ion-toggle [(ngModel)]="globalService.wifi.selectMqtt" (ionChange)="toggleMqttSelect()"></ion-toggle>
    <ion-label>와이파이 MQTT</ion-label>
  </ion-item> -->
  <!-- <ion-grid>
    <ion-row *ngFor="let row of [0, 1]">
      <ion-col size="3" *ngFor="let col of [0, 1, 2, 3]">
         번호를 표시하는 부분
        <ion-item>
          <ion-label class="ion-text-center">{{ row * 4 + col }}</ion-label>
        </ion-item>
         토글 스위치를 표시하는 부분
        <ion-item>
          <ion-toggle (ionChange)="sendDataToTab2(row * 4 + col, $event.detail.checked)"></ion-toggle>
        </ion-item>
      </ion-col>
    </ion-row>
  </ion-grid> -->

<div class="grid grid-cols-4 gap-4 mb-4">
  <div *ngFor="let relay of relays; let i = index" class="flex flex-col items-center">
    <button class="relay-button w-12 h-12 mb-2"
            [class.relay-on]="relay.isOn"
            [class.relay-off]="!relay.isOn"
            (click)="toggleRelay($event, i)">
      {{ i }}
    </button>
    <div class="w-3 h-3 rounded-full"
         [class.signal-on]="relay.isOn"
         [class.signal-off]="!relay.isOn">
    </div>
  </div>
</div>

<div class="led-container">
  <ng-container *ngFor="let led of leds; let i = index">
    <div class="led" [class.led-on]="led" [class.led-off]="!led">
      {{ i }}
    </div>
  </ng-container>
</div>
<div class="content-container">
  <!-- Voltage Readouts -->
  <div class="flex items-center justify-between mb-4">
    <div class="value-box">
      <div class="font-semibold text-gray-700">VBAT :</div>
      <div id="vbatValue" class="font-semibold text-gray-700 ml-2" [class.flash]="vbatUpdated">
        {{ globalService.dev.voltBat }}V
      </div>
    </div>
    <div class="value-box">
      <div class="font-semibold text-gray-700">ADC :</div>
      <div id="adcValue" class="font-semibold text-gray-700 ml-2" [class.flash]="adcUpdated">
        {{ globalService.dev.voltAdc }}V
      </div>
    </div>
  </div>
  <!-- Received Message Box -->
<div class="p-4 bg-white rounded shadow">
  <div class="flex justify-between items-center">
    <div>받은 메시지</div>
    <!-- <button (click)="toggleMessageLog()">+</button> Add this button -->
    <ion-button (click)="openLogModal()">log 기록</ion-button>
  </div>
  <div class="mt-2 p-2 bg-gray-200 rounded">{{ receivedMessage }}</div>
</div>

<!-- Message Log Section (initially hidden) -->
<!-- <div *ngIf="showMessageLog">
  <h3>로그 기록</h3>
  <ul>
    <li *ngFor="let msg of messageLog">{{ msg }}</li>
  </ul>
</div> -->
</div>
  <!-- <div>
    <p>배터리 전압: {{ globalService.dev.voltBat }}V</p>
    <p>ADC 전압: {{ globalService.dev.voltAdc }}V</p>
  </div>

   수신된 메시지 표시
  <div>
    <p>수신된 메시지: {{ receivedMessage }}</p>
  </div> -->

</ion-content>
